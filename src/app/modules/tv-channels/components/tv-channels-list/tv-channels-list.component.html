<div class="channel-list-container">
  <div class="page-header">
    <div class="page-header-content">
      <h1 class="page-title">TV Channels Management</h1>
      <p class="page-subtitle">Manage and configure television channels</p>
    </div>
    <div class="page-actions">
      <button class="btn btn-primary btn-lg" (click)="addChannel()">
        <i class="fas fa-plus"></i>
        Add Channel
      </button>
    </div>
  </div>

  <!-- Filters and Search -->
  <div class="filters-section">
    <div class="filters-row">
      <div class="search-group">
        <div class="search-input-container">
          <i class="fas fa-search search-icon"></i>
          <input
            type="text"
            [(ngModel)]="searchTerm"
            (input)="onSearchChange()"
            placeholder="Search channels..."
            class="search-input"
          />
        </div>
      </div>

      <div class="filter-group">
        <select
          [(ngModel)]="selectedCategoryId"
          (change)="onFilterChange()"
          class="filter-select"
        >
          <option [ngValue]="null">All Categories</option>
          <option *ngFor="let category of categories" [ngValue]="category.id">
            {{ category.name }}
          </option>
        </select>

        <select
          [(ngModel)]="selectedLanguageId"
          (change)="onFilterChange()"
          class="filter-select"
        >
          <option [ngValue]="null">All Languages</option>
          <option *ngFor="let language of languages" [ngValue]="language.id">
            {{ language.name }}
          </option>
        </select>

        <button class="btn btn-secondary" (click)="clearFilters()">
          <i class="fas fa-times"></i>
          Clear Filters
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="empty-state">
    <div class="loading">Loading...</div>
  </div>

  <!-- Channels Table -->
  <div *ngIf="!loading" class="table-container">
    <div class="table-header">
      <h3 class="table-title">Channels ({{ channels.length }})</h3>
    </div>

    <div class="table-content">
      <table class="table" *ngIf="channels.length > 0">
        <thead>
          <tr>
            <th (click)="onSortChange('channelNumber')" style="cursor: pointer">
              Channel #
              <i class="fas fa-sort" style="margin-left: 8px"></i>
            </th>
            <th>Logo</th>
            <th (click)="onSortChange('name')" style="cursor: pointer">
              Name
              <i class="fas fa-sort" style="margin-left: 8px"></i>
            </th>
            <th>Category</th>
            <th>Language</th>
            <th>Stream Info</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let channel of channels" class="table-row">
            <td class="channel-number">{{ channel.channelNumber }}</td>
            <td class="channel-logo">
              <img
                *ngIf="channel.logoUrl"
                [src]="channel.logoUrl"
                [alt]="channel.name"
                class="logo-img"
                style="width: 32px; height: 32px; border-radius: 4px"
                onerror="this.style.display='none'"
              />
              <div
                *ngIf="!channel.logoUrl"
                class="logo-placeholder"
                style="
                  width: 32px;
                  height: 32px;
                  background: var(--primary-color);
                  color: white;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  border-radius: 4px;
                  font-weight: bold;
                "
              >
                {{ channel.name.charAt(0) }}
              </div>
            </td>
            <td class="channel-info">
              <div
                class="channel-name"
                style="font-weight: 600; margin-bottom: 4px"
              >
                {{ channel.name }}
              </div>
              <div
                class="channel-description"
                style="font-size: 12px; color: var(--gray-600)"
                *ngIf="channel.description"
              >
                {{ channel.description }}
              </div>
            </td>
            <td class="channel-category">
              <span class="status-badge status-info" *ngIf="channel.category">
                {{ channel.category.name }}
              </span>
            </td>
            <td class="channel-language">
              <span
                class="status-badge status-secondary"
                *ngIf="channel.language"
              >
                {{ channel.language.name }} ({{ channel.language.code }})
              </span>
            </td>
            <td class="stream-info">
              <div class="stream-details">
                <span class="ip" style="font-family: monospace; font-size: 12px"
                  >{{ channel.ip }}:{{ channel.port }}</span
                >
              </div>
            </td>
            <td class="actions">
              <div class="action-buttons">
                <button
                  class="btn btn-sm btn-secondary action-btn"
                  [routerLink]="['/channels', channel.id]"
                  title="View Details"
                >
                  <i class="fas fa-eye"></i>
                </button>
                <button
                  class="btn btn-sm btn-primary action-btn"
                  [routerLink]="['/channels', channel.id, 'edit']"
                  title="Edit Channel"
                >
                  <i class="fas fa-edit"></i>
                </button>
                <button
                  class="btn btn-sm btn-danger action-btn"
                  (click)="deleteChannel(channel.id!)"
                  title="Delete Channel"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- No Results -->
      <div *ngIf="channels.length === 0" class="empty-state">
        <div class="empty-state-content">
          <i class="fas fa-tv empty-state-icon"></i>
          <h3 class="empty-state-title">No channels found</h3>
          <p class="empty-state-description">
            Get started by adding your first TV channel.
          </p>
          <button class="btn btn-primary" (click)="addChannel()">
            <i class="fas fa-plus"></i>
            Add First Channel
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
